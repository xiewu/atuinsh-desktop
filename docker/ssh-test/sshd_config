# SSH Integration Test Server Configuration
# Permissive settings to allow testing all authentication methods

Port 22
AddressFamily any
ListenAddress 0.0.0.0

# Authentication
PermitRootLogin no
PasswordAuthentication yes
PubkeyAuthentication yes
AuthorizedKeysFile .ssh/authorized_keys

# Certificate Authentication
# Trust certificates signed by our test CA
TrustedUserCAKeys /etc/ssh/ca_key.pub

# Allow all key algorithms for comprehensive testing
PubkeyAcceptedAlgorithms +ssh-rsa,rsa-sha2-256,rsa-sha2-512,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,ssh-ed25519,ssh-ed25519-cert-v01@openssh.com,rsa-sha2-256-cert-v01@openssh.com,rsa-sha2-512-cert-v01@openssh.com
HostKeyAlgorithms +ssh-rsa,rsa-sha2-256,rsa-sha2-512,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,ssh-ed25519

# Subsystems
Subsystem sftp /usr/lib/ssh/sftp-server

# Logging for debugging
LogLevel DEBUG

# Disable strict permission checks (test container only - allows bind-mounted authorized_keys)
StrictModes no

# Keep connections alive
ClientAliveInterval 60
ClientAliveCountMax 3

# Allow TCP forwarding for future ProxyJump tests
AllowTcpForwarding yes
GatewayPorts no

# Performance
UseDNS no
